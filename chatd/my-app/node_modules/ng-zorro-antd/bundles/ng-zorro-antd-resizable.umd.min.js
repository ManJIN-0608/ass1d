!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/cdk/platform"),require("ng-zorro-antd/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ng-zorro-antd/resizable",["exports","@angular/common","@angular/core","@angular/cdk/platform","ng-zorro-antd/core","rxjs","rxjs/operators"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"].resizable={}),e.ng.common,e.ng.core,e.ng.cdk.platform,e["ng-zorro-antd"].core,e.rxjs,e.rxjs.operators)}(this,function(e,t,n,i,o,r,s){"use strict";var h=function(){return(h=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var h=e.length-1;h>=0;h--)(o=e[h])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var u=function(){function e(){this.handleMouseDown$=new r.Subject,this.documentMouseUp$=new r.Subject,this.mouseEntered$=new r.Subject}return e.prototype.ngOnDestroy=function(){this.handleMouseDown$.complete(),this.documentMouseUp$.complete(),this.mouseEntered$.complete()},e.decorators=[{type:n.Injectable}],e.ctorParameters=function(){return[]},e}(),l=function(){function e(e,t,i,o,h){var c=this;this.elementRef=e,this.renderer=t,this.ngZone=i,this.nzResizableService=o,this.platform=h,this.nzBounds="parent",this.nzMinHeight=40,this.nzMinWidth=40,this.nzGridColumnCount=-1,this.nzMaxColumn=-1,this.nzMinColumn=-1,this.nzLockAspectRatio=!1,this.nzPreview=!1,this.nzResize=new n.EventEmitter,this.nzResizeEnd=new n.EventEmitter,this.nzResizeStart=new n.EventEmitter,this.resizing=!1,this.destroy$=new r.Subject,this.nzResizableService.handleMouseDown$.pipe(s.takeUntil(this.destroy$)).subscribe(function(e){c.resizing=!0,c.currentHandleEvent=e,c.setCursor(),c.nzResizeStart.emit({mouseEvent:e.mouseEvent}),c.elRect=c.el.getBoundingClientRect()})}return e.prototype.onMouseup=function(e){var t=this;this.ngZone.runOutsideAngular(function(){t.resizing&&(t.resizing=!1,t.nzResizableService.documentMouseUp$.next(),t.endResize(e))})},e.prototype.onMousemove=function(e){var t=this;this.ngZone.runOutsideAngular(function(){t.resizing&&t.resize(e)})},e.prototype.onMouseenter=function(){this.nzResizableService.mouseEntered$.next(!0)},e.prototype.onMouseleave=function(){this.nzResizableService.mouseEntered$.next(!1)},e.prototype.setPosition=function(){var e=getComputedStyle(this.el).position;"static"!==e&&e||this.renderer.setStyle(this.el,"position","relative")},e.prototype.calcSize=function(e,t,n){var i,r,s,h=0,c=0,a=1/0,u=this.nzMinWidth,l=1/0,d=1/0;if("parent"===this.nzBounds){var p=this.renderer.parentNode(this.el);if(p instanceof HTMLElement){var z=p.getBoundingClientRect();l=z.width,d=z.height}}else if("window"===this.nzBounds)"undefined"!=typeof window&&(l=window.innerWidth,d=window.innerHeight);else if(this.nzBounds&&this.nzBounds.nativeElement&&this.nzBounds.nativeElement instanceof HTMLElement){var m=this.nzBounds.nativeElement.getBoundingClientRect();l=m.width,d=m.height}return a=o.ensureInBounds(this.nzMaxWidth,l),s=o.ensureInBounds(this.nzMaxHeight,d),-1!==this.nzGridColumnCount&&(c=a/this.nzGridColumnCount,u=-1!==this.nzMinColumn?c*this.nzMinColumn:u,a=-1!==this.nzMaxColumn?c*this.nzMaxColumn:a),-1!==n?/(left|right)/i.test(this.currentHandleEvent.direction)?(i=Math.min(Math.max(e,u),a),((r=Math.min(Math.max(i/n,this.nzMinHeight),s))>=s||r<=this.nzMinHeight)&&(i=Math.min(Math.max(r*n,u),a))):(r=Math.min(Math.max(t,this.nzMinHeight),s),((i=Math.min(Math.max(r*n,u),a))>=a||i<=u)&&(r=Math.min(Math.max(i/n,this.nzMinHeight),s))):(i=Math.min(Math.max(e,u),a),r=Math.min(Math.max(t,this.nzMinHeight),s)),-1!==this.nzGridColumnCount&&(i=(h=Math.round(i/c))*c),{col:h,width:i,height:r}},e.prototype.setCursor=function(){switch(this.currentHandleEvent.direction){case"left":case"right":this.renderer.setStyle(document.body,"cursor","col-resize");break;case"top":case"bottom":this.renderer.setStyle(document.body,"cursor","row-resize");break;case"topLeft":case"bottomRight":this.renderer.setStyle(document.body,"cursor","nwse-resize");break;case"topRight":case"bottomLeft":this.renderer.setStyle(document.body,"cursor","nesw-resize")}this.renderer.setStyle(document.body,"user-select","none")},e.prototype.resize=function(e){var t=this.elRect,n=t.width,i=t.height,o=this.nzLockAspectRatio?n/i:-1;switch(this.currentHandleEvent.direction){case"bottomRight":n=e.clientX-t.left,i=e.clientY-t.top;break;case"bottomLeft":n=t.width+this.currentHandleEvent.mouseEvent.clientX-e.clientX,i=e.clientY-t.top;break;case"topRight":n=e.clientX-t.left,i=t.height+this.currentHandleEvent.mouseEvent.clientY-e.clientY;break;case"topLeft":n=t.width+this.currentHandleEvent.mouseEvent.clientX-e.clientX,i=t.height+this.currentHandleEvent.mouseEvent.clientY-e.clientY;break;case"top":i=t.height+this.currentHandleEvent.mouseEvent.clientY-e.clientY;break;case"right":n=e.clientX-t.left;break;case"bottom":i=e.clientY-t.top;break;case"left":n=t.width+this.currentHandleEvent.mouseEvent.clientX-e.clientX}var r=this.calcSize(n,i,o);this.sizeCache=h({},r),this.nzResize.emit(h({},r,{mouseEvent:e})),this.nzPreview&&this.previewResize(r)},e.prototype.endResize=function(e){this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(document.body,"user-select",""),this.removeGhostElement();var t=this.sizeCache?h({},this.sizeCache):{width:this.elRect.width,height:this.elRect.height};this.nzResizeEnd.emit(h({},t,{mouseEvent:e})),this.sizeCache=null},e.prototype.previewResize=function(e){var t=e.width,n=e.height;this.createGhostElement(),this.renderer.setStyle(this.ghostElement,"width",t+"px"),this.renderer.setStyle(this.ghostElement,"height",n+"px")},e.prototype.createGhostElement=function(){this.ghostElement||(this.ghostElement=this.renderer.createElement("div"),this.renderer.setAttribute(this.ghostElement,"class","nz-resizable-preview")),this.renderer.appendChild(this.el,this.ghostElement)},e.prototype.removeGhostElement=function(){this.ghostElement&&this.renderer.removeChild(this.el,this.ghostElement)},e.prototype.ngAfterViewInit=function(){this.platform.isBrowser&&(this.el=this.elementRef.nativeElement,this.setPosition())},e.prototype.ngOnDestroy=function(){this.ghostElement=null,this.sizeCache=null,this.destroy$.next(),this.destroy$.complete()},e.decorators=[{type:n.Directive,args:[{selector:"[nz-resizable]",providers:[u],host:{"[class.nz-resizable]":"true","[class.nz-resizable-resizing]":"resizing","(mouseenter)":"onMouseenter()","(mouseleave)":"onMouseleave()"}}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:n.NgZone},{type:u},{type:i.Platform}]},e.propDecorators={nzBounds:[{type:n.Input}],nzMaxHeight:[{type:n.Input}],nzMaxWidth:[{type:n.Input}],nzMinHeight:[{type:n.Input}],nzMinWidth:[{type:n.Input}],nzGridColumnCount:[{type:n.Input}],nzMaxColumn:[{type:n.Input}],nzMinColumn:[{type:n.Input}],nzLockAspectRatio:[{type:n.Input}],nzPreview:[{type:n.Input}],nzResize:[{type:n.Output}],nzResizeEnd:[{type:n.Output}],nzResizeStart:[{type:n.Output}],onMouseup:[{type:n.HostListener,args:["document:mouseup",["$event"]]}],onMousemove:[{type:n.HostListener,args:["document:mousemove",["$event"]]}]},c([o.InputBoolean(),a("design:type",Boolean)],e.prototype,"nzLockAspectRatio",void 0),c([o.InputBoolean(),a("design:type",Boolean)],e.prototype,"nzPreview",void 0),e}(),d=function(e,t){this.direction=e,this.mouseEvent=t},p=function(){function e(e,t){this.nzResizableService=e,this.cdr=t,this.nzDirection="bottomRight",this.nzMouseDown=new n.EventEmitter,this.entered=!1,this.destroy$=new r.Subject}return e.prototype.ngOnInit=function(){var e=this;this.nzResizableService.mouseEntered$.pipe(s.takeUntil(this.destroy$)).subscribe(function(t){e.entered=t,e.cdr.markForCheck()})},e.prototype.onMousedown=function(e){this.nzResizableService.handleMouseDown$.next(new d(this.nzDirection,e))},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.decorators=[{type:n.Component,args:[{selector:"nz-resize-handle, [nz-resize-handle]",template:"<ng-content></ng-content>",changeDetection:n.ChangeDetectionStrategy.OnPush,host:{"[class]":'"nz-resizable-handle nz-resizable-handle-" + nzDirection',"[class.nz-resizable-handle-box-hover]":"entered","(mousedown)":"onMousedown($event)"}}]}],e.ctorParameters=function(){return[{type:u},{type:n.ChangeDetectorRef}]},e.propDecorators={nzDirection:[{type:n.Input}],nzMouseDown:[{type:n.Output}]},e}(),z=["bottomRight","topRight","bottomLeft","topLeft","bottom","right","top","left"],m=function(){function e(){this.nzDirections=z,this.directions=new Set(this.nzDirections)}return e.prototype.ngOnChanges=function(e){e.nzDirections&&(this.directions=new Set(e.nzDirections.currentValue))},e.decorators=[{type:n.Component,args:[{selector:"nz-resize-handles",template:'<nz-resize-handle *ngFor="let dir of directions" [nzDirection]="dir"></nz-resize-handle>\n',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[]},e.propDecorators={nzDirections:[{type:n.Input}]},e}(),g=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[l,p,m],exports:[l,p,m]}]}],e}();e.DEFAULT_RESIZE_DIRECTION=z,e.NzResizableDirective=l,e.NzResizableModule=g,e.NzResizableService=u,e.NzResizeHandleComponent=p,e.NzResizeHandleMouseDownEvent=d,e.NzResizeHandlesComponent=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-zorro-antd-resizable.umd.min.js.map